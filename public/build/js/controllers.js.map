{"version":3,"sources":["indexController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"controllers.js","sourcesContent":["/**\r\n * Created by charliedearce on 10/24/2016.\r\n */\r\nmyApp.controller('indexController', ['$scope' , '$timeout', 'indexModel', '$location', function($scope, $timeout, indexModel, $location) {\r\n\r\n    var a = randomNumber('val1');\r\n    var b = randomNumber('val2');\r\n    var c = randchar();\r\n    var myasnwer = test(a,b,c);\r\n    captcha()\r\n\r\n    function randchar() {\r\n        var sym = \"\";\r\n        var str = '-+';\r\n        for( var i=0; i < 1; i++ )\r\n            sym += str.charAt(Math.floor(Math.random() * str.length));\r\n        return sym;\r\n    }\r\n    function randomNumber($test1) {\r\n        var value;\r\n        if($test1 == 'val1'){\r\n            value = Math.floor((Math.random()*50) + 15);\r\n        } else if($test1 == 'val2') {\r\n            value = Math.floor((Math.random()*10) + 1);\r\n        }\r\n        return value;\r\n    }\r\n    function captcha(){\r\n        $scope.valone = a;\r\n        $scope.valtwo = b;\r\n        $scope.operator = c;\r\n    }\r\n\r\n    function test($val1, $val2, $sym) {\r\n        var answer;\r\n    if ($sym == '-') {\r\n        answer =  $val1 - $val2;\r\n    } else {\r\n        answer = $val2 + $val1;\r\n    }\r\n    return answer;\r\n    }\r\n\r\n    angular.extend($scope, {\r\n        newMessage: {},\r\n        errorDiv: false,\r\n        errorMessage: []\r\n    });\r\n\r\n    /*Functions*/\r\n    angular.extend($scope,$timeout,$location, {\r\n        sendMessage: function (sendForm) {\r\n\r\n            if(sendForm.$valid) {\r\n                if(myasnwer == $scope.newMessage.answer){\r\n                    $scope.formSubmitted = false;\r\n                   indexModel.saveMessage($scope.newMessage).success(function (response) {\r\n                        $scope.showSuccess = true;\r\n                        console.log(response);\r\n\r\n                           $scope.captchaError = false;\r\n                           a = randomNumber('val1');\r\n                           b = randomNumber('val2');\r\n                           c = randchar();\r\n                           myasnwer = test(a,b,c);\r\n                           captcha();\r\n\r\n                        $scope.newMessage.messageto = '';\r\n                        $scope.newMessage.messagetext = '';\r\n                        $scope.newMessage.answer = '';\r\n\r\n                       $timeout(function () {\r\n                           $scope.showSuccess = false;\r\n                       }, 5000);\r\n                    })\r\n                } else {\r\n                    $scope.formSubmitted = true;\r\n                    console.log('captcha error');\r\n                    $scope.captchaError = true;\r\n                }\r\n            } else {\r\n                $scope.formSubmitted = true;\r\n                console.log('validation error');\r\n            }\r\n        }\r\n    });\r\n}]);"]}